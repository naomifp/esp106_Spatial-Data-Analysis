View(g)
g <- as.data.frame(rownames(w))
View(g)
subset(bluew, subset=rownames(bluew) == g)
View(g)
colnames(g)<-ind
colnames(g)<-'ind'
subset(bluew, subset=rownames(bluew) == g$ind)
subset(bluew, bluew$ind_ident == g$ind)
y <- subset(bluew, bluew$ind_ident == g$ind)
f <- is.related(y, wco, "intersects")
f <- is.related(bluew, wco, "intersects")
x = table(f)
table(f)
x[2] / sum(x)
w <-  tapply(bluew$date, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(g)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
g <- is.related(y, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
table(g)
y[2] / sum(y)
w <-  tapply(bluew$date, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(g)<-'ind'
w <-  tapply(bluew$date, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
g <- is.related(y, wco, "intersects")
w <-  tapply(bluew$date, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
w <-  tapply(bluew$date, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
View(iw)
View(ind)
nrow(iw)
nrow(w)
nrow(iw)
head(bluew)
w <-  tapply(bluew$timestamp, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
rownames(bluew)
names(bluew)
w <-  tapply(bluew$calc_freq, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
g <- is.related(iw, wco, "intersects")
y = table(g)
names(bluew)
w <-  tapply(bluew$calc_freq, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
w <-  tapply(bluew$calc_freq, bluew$ind_ident, function(x) length(unique(x)))
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
View(bluew)
head(bluew)
head(bluew)
w <-  tapply(bluew$calc_freq, bluew$ind_ident, function(x) x)
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
head(bluew)
w <-  tapply(bluew$calc_freq, bluew$ind_ident, function(x) x)
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(w)/nrow(iw)
nrow(iw)
nrow(w)
nrow(iw)/nrow(w)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
y[2]
nrow(w)
y[2] / nrow(w)
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
nrow(w)
nrow(iw)/nrow(w)
nrow(iw)
nrow(w)
nrow(iw)/nrow(w)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
y[2]
nrow(w)
y[2] / nrow(w)
ind <- as.data.frame(rownames(w))
colnames(ind)<-'ind'
iw <- subset(bluew, bluew$ind_ident == ind$ind)
nrow(iw)
nrow(w)
nrow(iw)/nrow(w)
nrow(iw)
nrow(w)
nrow(iw)/nrow(w)
g <- is.related(iw, wco, "intersects")
y = table(g)
table(g)
y[2] / sum(y)
y[2]
nrow(w)
y[2] / nrow(w)
knitr::opts_chunk$set(echo = TRUE)
path <- "...."
knitr::opts_knit$set(root.dir = path)
setwd(path)
install.packages('terra', repos='https://rspatial.r-universe.dev')
install.packages("terra", repos = "https://rspatial.r-universe.dev")
knitr::opts_chunk$set(echo = TRUE)
path <- "...."
knitr::opts_knit$set(root.dir = path)
setwd(path)
install.packages('terra', repos='https://rspatial.r-universe.dev')
install.packages("terra", repos = "https://rspatial.r-universe.dev")
knitr::opts_chunk$set(echo = TRUE)
table(pop10$NAME[1:10])
pop10$NAME[1:10]
knitr::opts_chunk$set(echo = TRUE)
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
filename <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
hc <- rast(filename, "TREFHT")
ext(hc)
hc <- rotate(hc)
ext(hc)
#Hint 1: Check the object type of the POP2020 column. If necessary convert to a numeric vector using as.numeric()
#Hint 2: The function order() will give you the index value corresponding to the ascending or descending numerical order of a column
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
pop10 <- pop[order(pop$POP2020, decreasing = TRUE), ]
ext(hc)
hc <- rotate(hc)
ext(hc)
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
install.packages("rnaturalearth")
install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
library(terra)
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
filename <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
hc <- rast(filename, "TREFHT")
ext(hc)
hc <- rotate(hc)
ext(hc)
#Hint 1: Check the object type of the POP2020 column. If necessary convert to a numeric vector using as.numeric()
#Hint 2: The function order() will give you the index value corresponding to the ascending or descending numerical order of a column
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
pop <- vect(rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
))
class(pop)
knitr::opts_chunk$set(echo = TRUE)
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
filename <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
hc <- rast(filename, "TREFHT")
ext(hc)
hc <- rotate(hc)
ext(hc)
#Hint 1: Check the object type of the POP2020 column. If necessary convert to a numeric vector using as.numeric()
#Hint 2: The function order() will give you the index value corresponding to the ascending or descending numerical order of a column
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
install.packages("rnaturalearth")
knitr::opts_chunk$set(echo = TRUE)
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
pop <- terra::vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
class(pop)
pop10 <- pop[order(pop$POP2020, decreasing = TRUE), ]
pop10$NAME[1:10]
plot(hc[[1]])
terra::plot(hc[[1]])
library(terra)
hc
terra::plot(hc[[1]])
plot(hc[[1]])
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
filename <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
hc <- rast(filename, "TREFHT")
hc
ext(hc)
hc <- rotate(hc)
ext(hc)
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- terra::vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
class(pop)
pop10 <- pop[order(pop$POP2020, decreasing = TRUE), ]
pop10$NAME[1:10]
plot(hc[[1]])
points(pop10)
values(hc)
units(hc)
cover(hc, "1")
head(hc)
hc-273.15
hc
hc-273.15
hc <- (hc-273.15)
units(hc) <- "C"
hc
obs_temp <- list.files("Observed Temp Data", pattern="nc$", full.names=TRUE)
ot <- rast(obs_temp, "tmp")
obs_temp <- list.files("Observed Temp Data", pattern="nc$", full.names=TRUE)
ot <- rast(obs_tem, subds="tmp", lyrs=NULL, drivers=NULL, opts=NULL, win=NULL)
ot <- rast(obs_temp, subds="tmp", lyrs=NULL, drivers=NULL, opts=NULL, win=NULL)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
obs_temp <- list.files("Observed Temp Data", pattern="nc$", full.names=TRUE)
ot <- rast(obs_temp, subds="tmp", lyrs=NULL, drivers=NULL, opts=NULL, win=NULL)
filename <- list.files("Observed Temp Data", pattern="nc$", full.names=TRUE)
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
hist_clim <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
gc()
library(terra)
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
hist_clim <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
hc <- rast(hist_clim, "TREFHT")
hc
ext(hc)
hc <- rotate(hc)
ext(hc)
#install.packages("rnaturalearth")
pop <- rnaturalearth::ne_download(
scale = 110,
type = "populated_places"
)
pop <- terra::vect(pop, geom=c("lon", "lat"), crs="", keepgeom=FALSE)
class(pop)
pop10 <- pop[order(pop$POP2020, decreasing = TRUE), ]
pop10$NAME[1:10]
plot(hc[[1]])
points(pop10)
hc <- (hc-273.15)
units(hc) <- "C"
hc
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
obs_temp <- list.files("Observed Temp Data", pattern="nc$", full.names=TRUE)
ot <- rast(obs_temp, subds="tmp", lyrs=NULL, drivers=NULL, opts=NULL, win=NULL)
hc
ot
# hint: have a look at ?terra::time to see how to get years
terra::time(hc, format="years", values="1991")
# hint: have a look at ?terra::time to see how to get years
terra::time(hc, format="years")
subset(hc, 852:971)
hco <- subset(hc, 852:971)
hco
city_obs <- extract( hco, pop10, ID=FALSE)
city_sim <- extract( hc, pop10, ID=FALSE)
View(city_obs)
View(city_sim)
setwd('C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\midterm2\\')
unzip('mid2.zip')
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012.nc", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012.nc", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
library(terra)
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chland <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
library(terra)
setwd('C:/Users/judy8/Box/PhD_UCD/UCD_course/Winter_2023/ESP106/Lab/Lab7')
knitr::opts_chunk$set(echo = TRUE)
#reading historic climate data
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
hist_clim <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
gc()
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chland <- list.files("chinalanduse_MODIS_2012.nc", pattern="nc$", full.name=TRUE)
chinaland <- rast(chland)
gc()
getwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
landuse <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.name=TRUE)
chinaland <- rast(landuse)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chinaland <- rast("chinalanduse_MODIS_2012.nc")
chinapolygon <- vect("chinalanduse_MODIS_2012.nc")
ch <- rasterize(chinapolygon, chinaland)
ch
ch <- rasterize(chinapolygon, chinaland, na.rm=T)
ch
ch <- rasterize(chinapolygon, chinaland)
ch
ch <- rasterize(chinapolygon, chinaland)
ch
chinapolygon
chinaland
head(ch)
head(chinaland)
ch
chinapolygon
chinapolygon <- vect("chn_adm.shp")
chinaland
chinapolygon
ch <- rasterize(chinapolygon, chinaland)
ch
head(ch)
head (chinapolygon)
head (chinaland)
lyrname <- c("urban", "cropland", "grassland", "forest")
library(dplyr)
rast(ch, names=lyrname)
ch <- rast(ch, names=lyrname)
ch
head(ch)
chinaland <- rast(chinaland, names=lyrname)
head(chinaland)
plot(ch)
plot(chinaland)
plot(chinapolygon)
ext(chinapolygon)
chn_ext <- ext(chinapolygon)
gc()
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chn_land <- rast("chinalanduse_MODIS_2012.nc")
chn_poly <- vect("chn_adm.shp")
chn_ext <- ext(chn_poly)
crop(chn_land, chn_ext)
chn <- crop(chn_land, chn_ext)
chn
head(chn)
chn
lyrname <- c("urban", "cropland", "grassland", "forest")
chn <- rast(chn, names=lyrname)
chn
chn
names(chn)
chn
plot(chn)
plot(chn_land)
plot(chn_poly)
plot(chn)
plot(chn_poly)
plot(chn)
plot(chn_poly)
points(chn_poly)
plot(chn)
points(chn_poly)
plot(chn_poly)
points(chn)
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("Data/Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
chn_land <- rast(chnlanduse)
chnlanduse <- list.files("midterm2/Data/Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/")
chnlanduse <- list.files("Data/Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2/Data")
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
#reading historic climate data
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
hist_clim <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
#making historic climate data as spatial raster data under the name hc (historic climate)
hc <- rast(hist_clim, "TREFHT")
gc()
setwd("C:\\Users\\Benny Panjaitan\\Documents\\GitHub\\esp106-Naomi\\W7 Lab\\Data")
filename <- list.files("Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.name=TRUE)
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("Climate Model Data_Historic", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
chnlanduse <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files("chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files(path="chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files(path="chinalanduse_MODIS_2012")
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files(path="midterm2/chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/")
chnlanduse <- list.files(path="midterm2/chinalanduse_MODIS_2012", pattern="nc$", full.names=TRUE)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files(path="data", pattern="nc$", full.names=TRUE)
chn_land <- rast(chnlanduse)
chn_land
library(terra)
setwd("C:/Users/Benny Panjaitan/Documents/GitHub/esp106-Naomi/midterm2")
chnlanduse <- list.files(path="data", pattern="nc$", full.names=TRUE)
chnpolygon <- list.files(path="data", pattern="shp$", full.names=TRUE)
chn_land <- rast(chnlanduse)
chn_poly <- vect(chnpolygon)
chn_ext <- ext(chn_poly)
chn <- crop(chn_land, chn_ext)
chn
lyrname <- c("urban", "cropland", "grassland", "forest")
chn <- rast(chn, names=lyrname)
chn
plot(chn)
chn_land
head(chn_land)
